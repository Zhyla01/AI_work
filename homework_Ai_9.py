# (Завдання_1)

from langchain_google_genai import GoogleGenerativeAI
import dotenv
import os

# Завантаження API ключів
dotenv.load_dotenv()
api_key = os.getenv('GEMINI_API_KEY')

# Правила повернення товару
rules = """
УМОВИ ПОВЕРНЕННЯ ТОВАРУ

1. Термін повернення
   Повернення товару можливе протягом 14 календарних днів з моменту покупки, якщо інше не передбачено законодавством або умовами конкретного товару.

2. Стан товару
   - Товар має бути в оригінальному пакуванні.
   - Не повинен мати слідів використання.
   - Повинен містити всі комплектуючі та документи (гарантійний талон, інструкція тощо).

3. Товари, що не підлягають поверненню
   - Продукти харчування, медикаменти, косметика.
   - Товари особистої гігієни.
   - Програмне забезпечення, цифрові товари після активації.
   - Товари, виготовлені на замовлення покупця.

4. Процедура повернення
   - Покупець подає заявку на повернення через форму на сайті або за телефоном підтримки.
   - Товар надсилається назад разом із чеком та заповненою заявою на повернення.
   - Продавець проводить перевірку стану товару.

5. Повернення коштів
   - Гроші повертаються протягом 7 робочих днів після підтвердження прийняття товару.
   - Спосіб повернення коштів відповідає способу оплати.

6. Контакти для зв’язку
   Якщо у вас є питання щодо повернення товару, звертайтеся за телефоном +380123456789 або на email forcostom@gmail.com.
"""

# Ініціалізація LLM
llm = GoogleGenerativeAI(
    model='gemini-2.0-flash',
    google_api_key=api_key,
    temperature=0.3
)

# Початкова інструкція
query = f'''Instruction: Ти — ввічливий чат-бот служби підтримки. \
Відповідай чітко та лаконічно на запитання користувача про повернення товару, \
використовуючи такі правила:

{rules}
'''

# Цикл спілкування
while True:
    question = input('Ваше питання стосовно повернення товару або Enter для завершення: ')

    if question.strip() == '':
        print("Дякуємо за звернення! Гарного дня!")
        break

    query += f'\nHuman: {question}\nAI:'

    response = llm.invoke(query)
    print(response)

    # Додаємо відповідь до історії для контексту
    query += f' {response}'


